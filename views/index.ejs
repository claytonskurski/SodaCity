<!-- Ensure these dependencies are included in your layout file or here -->
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Lightbox2 CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">

<div class="hero-section" style="background-image: url('/static/images/Congaree NP.webp');">
    <div class="hero-content">
        <h1>Discover Adventure. Build Community. Experience Soda City.</h1>
        <p class="hero-subtitle">Columbia's premier adventure community, connecting outdoor enthusiasts and social explorers through unforgettable experiences.</p>
        <button class="cta-button" onclick="window.location.href='/signup'">Start Your Adventure</button>
    </div>
</div>

<section id="about" class="about-section">
    <div class="section-content">
        <div class="feature-block adventure">
            <h2><i class="fas fa-mountain"></i> ADVENTURE AWAITS</h2>
            <p>in your own backyard! Join us for exhilarating kayak trips down the Saluda River, scenic hikes through South Carolina's breathtaking state parks, heart-pounding mountain biking trails, and peaceful paddleboarding excursions on Lake Murray. From thrilling day trips to the National Whitewater Center in Charlotte to Congaree National Park, we bring the excitement to your doorstep.</p>
        </div>

        <div class="feature-block community">
            <h2><i class="fas fa-users"></i> COMMUNITY THRIVES</h2>
            <p>when we gather! Our social calendar overflows with opportunities to connect—weekend brunches before Soda City Market, craft beer tastings at local breweries, wine socials, impromptu disc golf competitions, and casual meet-ups throughout Columbia. We don't just explore the outdoors; we celebrate the vibrant culture of our city together.</p>
        </div>

        <div class="feature-block members">
            <h2><i class="fas fa-star"></i> MEMBERS LEAD THE WAY</h2>
            <p>Your passion drives our community. Have an adventure idea? Lead a group on your favorite trail, organize a float trip, or suggest the perfect brewery for our next gathering. From overnight camping trips to swing dancing lessons, our diverse calendar reflects the interests of our dynamic membership.</p>
        </div>
    </div>
</section>

<section id="join" class="join-section">
    <div class="section-content">
        <div class="join-container">
            <!-- Left Column: Join Today and How It Works -->
            <div class="join-left">
                <div class="join-content">
                    <h2>JOIN TODAY</h2>
                    <p>Transform how you experience Columbia! Whether you're seeking adrenaline-pumping adventures, looking to meet like-minded outdoor enthusiasts, or simply wanting to discover the hidden gems of South Carolina with fantastic company—Soda City Outdoors is your gateway to connection and discovery.</p>
                    <div class="button-container">
                        <a href="/events" class="view-events-btn">VIEW UPCOMING EVENTS</a>
                        <a href="/calendar" class="browse-calendar-btn">BROWSE CALENDAR</a>
                    </div>
                </div>

                <div class="how-it-works">
                    <h2>HOW IT WORKS</h2>
                    <div class="step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h3>Join the Adventure</h3>
                            <p>Kickstart your journey with a free 30-day membership—no strings attached! Sign up and unlock a world of outdoor fun.</p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h3>Explore & Connect</h3>
                            <p>Dive into our events calendar, RSVP to exciting activities, and get outdoors. From hikes to socials, there’s something for everyone!</p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <h3>Build Community</h3>
                            <p>Meet fellow adventurers, share experiences, and help shape our vibrant community by leading your own events.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Photo Album -->
            <div class="photo-album">
                <% if (galleryItems && galleryItems.length > 0) { %>
                    <div id="photoCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <%
                                // Flatten all image URLs from galleryItems into a single array
                                let allImages = [];
                                galleryItems.forEach(item => {
                                    if (item.imageUrls && item.imageUrls.length > 0) {
                                        item.imageUrls.forEach((url, index) => {
                                            allImages.push({ url, title: item.title });
                                        });
                                    }
                                });

                                // Shuffle the array to randomize images
                                for (let i = allImages.length - 1; i > 0; i--) {
                                    const j = Math.floor(Math.random() * (i + 1));
                                    [allImages[i], allImages[j]] = [allImages[j], allImages[i]];
                                }

                                // Take up to 3 images (or fewer if there aren't 3)
                                const selectedImages = allImages.slice(0, Math.min(3, allImages.length));

                                // Render carousel items
                                selectedImages.forEach((image, index) => {
                            %>
                                <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                                    <a href="<%= image.url %>" data-lightbox="photo-album" data-title="<%= image.title %>">
                                        <img src="<%= image.url %>" class="d-block w-100" alt="<%= image.title %>">
                                    </a>
                                </div>
                            <% }); %>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#photoCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#photoCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <!-- Title Below Carousel -->
                    <div class="photo-album-title">
                        <p>Take a look at some photos from our recent adventures!</p>
                    </div>
                <% } else { %>
                    <div class="text-center">
                        <p>No photos available to display.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</section>

<section class="community-section">
    <div class="section-content">
        <h2>Connect With Our Community</h2>
        <div class="community-features">
            <div class="feature-card">
                <i class="fas fa-comments"></i>
                <h3>Forum Discussions</h3>
                <p>Share experiences and connect with fellow adventurers</p>
                <a href="/forum" class="feature-link">Join the Conversation</a>
            </div>
            <div class="feature-card">
                <i class="fas fa-calendar-alt"></i>
                <h3>Event Planning</h3>
                <p>Organize and join local adventures</p>
                <a href="/events" class="feature-link">Browse Events</a>
            </div>
            <div class="feature-card">
                <i class="fas fa-envelope"></i>
                <h3>Stay Updated</h3>
                <p>Get the latest news and event notifications</p>
                <a href="/contact" class="feature-link">Contact Us</a>
            </div>
        </div>
    </div>
</section>

<style>
:root {
    --primary-color: #0e747c;
    --accent-color: #80bec0;
    --text-color: #333;
    --light-bg: #f8f9fa;
}

.hero-section {
    height: 100vh;
    min-height: 600px;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
}

.hero-content {
    text-align: center;
    color: white;
    max-width: 800px;
    padding: 0 20px;
    position: relative;
    z-index: 1;
}

.hero-content h1 {
    font-size: 3.5em;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.hero-subtitle {
    font-size: 1.5em;
    margin-bottom: 30px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.cta-button {
    padding: 15px 40px;
    font-size: 1.2em;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    background-color: #0a5961;
}

.section-content {
    max-width: 90%;
    width: 1400px;
    margin: 0 auto;
    padding: 40px 20px;
}

.about-section {
    background-color: white;
    padding: 60px 0;
}

.feature-block {
    margin-bottom: 40px;
    padding: 40px;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.feature-block:hover {
    transform: translateY(-5px);
}

.feature-block h2 {
    color: var(--primary-color);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
}

.feature-block i {
    font-size: 1.5em;
}

.join-section {
    padding: 60px 0;
}

.join-container {
    display: flex;
    gap: 40px;
    align-items: stretch;
}

.join-left, .photo-album {
    flex: 1;
}

.join-left {
    display: flex;
    flex-direction: column;
    gap: 40px;
}

.join-content {
    text-align: center;
}

.join-content h2, .how-it-works h2 {
    font-family: var(--heading-font);
    font-size: 2em;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 40px;
}

.how-it-works {
    padding: 40px;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.how-it-works i {
    font-size: 1.5em;
}

.step {
    display: flex;
    align-items: flex-start;
    margin-bottom: 30px;
    flex: 1;
}

.step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    background-color: var(--primary-color);
    color: white;
    border-radius: 50%;
    font-family: var(--heading-font);
    font-size: 1.4em;
    font-weight: var(--font-medium);
    margin-right: 20px;
    flex-shrink: 0;
}

.step-content h3 {
    color: var(--text-color);
    margin-bottom: 15px;
    font-size: 1.5em;
}

.step-content p {
    margin: 0;
    color: var(--text-color);
    font-size: 1.1em;
    line-height: 1.6;
}

.button-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}

.view-events-btn, .browse-calendar-btn {
    display: inline-block;
    padding: 12px 24px;
    background-color: var(--primary-color);
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 1.1em;
    font-family: var(--heading-font);
    font-weight: var(--font-medium);
    text-transform: uppercase;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

.view-events-btn:hover, .browse-calendar-btn:hover {
    transform: translateY(-2px);
    background-color: #0a5961;
}

.photo-album {
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    background-color: #fff;
    display: flex;
    flex-direction: column;
}

.photo-album .carousel {
    flex: 1; /* Allow carousel to take up available space */
    min-height: 0; /* Prevent flexbox from ignoring min-height constraints */
}

.photo-album .carousel-inner, .photo-album .carousel-item {
    height: 100%; /* Ensure inner elements take full height */
}

.photo-album .carousel-item img {
    width: 100%;
    height: 100%; /* Stretch to fill the carousel height */
    object-fit: cover;
}

.photo-album-title {
    padding: 20px;
    text-align: center;
    background-color: #fff;
}

.photo-album-title p {
    margin: 0;
    font-size: 1.2em;
    color: var(--primary-color);
    font-family: var(--heading-font);
    font-weight: 500;
}

.community-section {
    background-color: white;
    padding: 60px 0;
}

.community-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    margin-top: 40px;
}

.feature-card {
    text-align: center;
    padding: 30px;
    border-radius: 10px;
    background: var(--light-bg);
    transition: all 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.feature-card i {
    font-size: 2.5em;
    color: var(--primary-color);
    margin-bottom: 20px;
}

.feature-card h3 {
    color: var(--text-color);
    margin-bottom: 15px;
}

.feature-link {
    display: inline-block;
    margin-top: 15px;
    color: var(--primary-color);
    text-decoration: none;
    font-weight: bold;
    transition: color 0.3s ease;
}

.feature-link:hover {
    color: var(--accent-color);
}

@media (max-width: 768px) {
    .hero-content h1 {
        font-size: 2.5em;
    }
    
    .hero-subtitle {
        font-size: 1.2em;
    }
    
    .button-container {
        flex-direction: column;
    }
    
    .feature-block {
        padding: 20px;
    }

    .join-container {
        flex-direction: column;
        gap: 20px;
    }

    .join-left, .photo-album {
        width: 100%;
    }

    .how-it-works {
        padding: 30px;
    }

    .step-number {
        width: 40px;
        height: 40px;
        font-size: 1.2em;
    }

    .step-content h3 {
        font-size: 1.3em;
    }

    .step-content p {
        font-size: 1em;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
});
</script>